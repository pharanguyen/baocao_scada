@using System.Collections.ObjectModel;
@using DAO.Services.DanhMuc;
@using DAO.Models.DanhMuc;
@using MsUtils;

<SfMultiSelect @ref="MultiSelectObj" TValue="int[]" TItem="prcThongSo" Placeholder="Chọn thông số" Mode="VisualMode.CheckBox" @bind-Value="Value" DataSource="@Data1"
               AllowFiltering="true"
               ShowSelectAll="@selectAll"
               Width="@Width"
               PopupWidth="@PopupWidth">
    <MultiSelectEvents TItem="prcThongSo" TValue="int[]" ValueChange="@ValueChangeHandler"></MultiSelectEvents>
    <MultiSelectFieldSettings Text="Ten" Value="Id"></MultiSelectFieldSettings>
</SfMultiSelect>

@code {
    public bool selectAll { get; set; } = true;
    SfMultiSelect<int[], prcThongSo> MultiSelectObj;
    [Parameter]
    public List<prcThongSo> Data1 { get; set; } = new List<prcThongSo>();
    

    [Parameter]
    public string PopupWidth { get; set; } = "200px";

    [Parameter]
    public string Width { get; set; } = "100px";
    [Parameter]
    public int[] Value { get; set; } = new int[] { };
    protected override void OnInitialized()

    {
    if (Data1.Count() == 0)
    {
      Data1= DmThongSoService.GetToComBobyIdThongSo(GlobalValue.ms_chinhanh).Data;
    }
    //if (GlobalValue.ms_chinhanh != null)
    //{
    //    Data = DmTramService.GetToComBobyIdTram(GlobalValue.ms_chinhanh).Data;
    //}
    //else
    //{

    //    Data = DmTramService.GetToComBobyIdTramAll().Data;
    //}
}
    private void ValueChangeHandler(MultiSelectChangeEventArgs<int[]> args)
    {
        if (args.Value != null)
        {
            Value = args.Value;
            
        }
        
    }
}
